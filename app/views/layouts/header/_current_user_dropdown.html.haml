- return unless current_user

%ul
  %li.current-user
    .user-name.bold
      = current_user.name
    = current_user.to_reference
    .user-status-emoji.has-tooltip{ title: current_user.status.message_html, data: { html: 'true', placement: 'bottom' } }
      = emoji_icon current_user.status.emoji
      = current_user.status.message
  %li.divider
  - if can?(current_user, :update_user_status, current_user)
    %li
      %button.js-set-user-status-button.btn.menu-link{ type: 'button',
        data: { target: '#set-user-status-modal',
                container: 'body',
                toggle: 'modal' } }
        = s_('SetStatusModal|Set a status')
  - if current_user_menu?(:profile)
    %li
      = link_to s_("CurrentUser|Profile"), current_user, class: 'profile-link', data: { user: current_user.username }
  - if current_user_menu?(:settings)
    %li
      = link_to s_("CurrentUser|Settings"), profile_path
  - if current_user_menu?(:help)
    %li
      = link_to _("Help"), help_path
  - if current_user_menu?(:help) || current_user_menu?(:settings) || current_user_menu?(:profile)
    %li.divider
  = render 'shared/user_dropdown_contributing_link'
  - if current_user_menu?(:sign_out)
    %li
      = link_to _("Sign out"), destroy_user_session_path, class: "sign-out-link"
