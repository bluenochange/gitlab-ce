= form_for @group, html: { multipart: true, class: 'gl-show-field-errors' }, authenticity_token: true do |f|
  %input{ type: 'hidden', name: 'update_section', value: 'js-permissions-settings' }
  = form_errors(@group)

  %fieldset
    %h5 Permissions
    .form-group
      = render 'shared/allow_request_access', form: f

    .form-group.mb-4
      .form-check
        = f.check_box :share_with_group_lock, disabled: !can_change_share_with_group_lock?(@group), class: 'form-check-input'
        = f.label :share_with_group_lock, class: 'form-check-label' do
          %span
            - group_link = link_to @group.name, group_path(@group)
            = s_('GroupSettings|Prevent sharing a project within %{group} with other groups').html_safe % { group: group_link }
          %br
          %span.text-muted= share_with_group_lock_help_text(@group)

    %h5 Large File Storage
    - docs_link_url = help_page_path('workflow/lfs/manage_large_binaries_with_git_lfs')
    - docs_link_start = '<a href="%{url}" target="_blank" rel="noopener noreferrer">'.html_safe % { url: docs_link_url }
    %p= s_('Check the %{docs_link_start}documentation%{docs_link_end}.').html_safe % { docs_link_start: docs_link_start, docs_link_end: '</a>'.html_safe }
    .form-group.mb-4
      .form-check
        = f.check_box :lfs_enabled, checked: @group.lfs_enabled?, class: 'form-check-input'
        = f.label :lfs_enabled, class: 'form-check-label' do
          %span
            Allow projects within this group to use Git LFS
          %br/
          %span.text-muted This setting can be overridden in each project.

    %h5 Two-factor authentication
    - docs_link_url = help_page_path('security/two_factor_authentication', anchor: 'enforcing-2fa-for-all-users-in-a-group')
    - docs_link_start = '<a href="%{url}" target="_blank" rel="noopener noreferrer">'.html_safe % { url: docs_link_url }
    %p= s_('Check the %{docs_link_start}documentation%{docs_link_end}.').html_safe % { docs_link_start: docs_link_start, docs_link_end: '</a>'.html_safe }
    = render 'groups/group_2fa_settings', f: f

    = render_if_exists 'groups/member_lock_setting', f: f, group: @group

  = f.submit _('Save changes'), class: 'btn btn-success mt-4'
